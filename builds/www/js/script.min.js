var responsivelyLazy=function(){var hasWebPSupport=!1,windowWidth=null,windowHeight=null,hasIntersectionObserverSupport="undefined"!=typeof IntersectionObserver,isVisible=function(element){if(null===windowWidth)return!1;var rect=element.getBoundingClientRect(),elementTop=rect.top,elementLeft=rect.left,elementWidth=rect.width,elementHeight=rect.height;return elementTop<windowHeight&&elementTop+elementHeight>0&&elementLeft<windowWidth&&elementLeft+elementWidth>0},updateElement=function(container,element){var options=element.getAttribute("data-srcset");if(null!==options)if((options=options.trim()).length>0){for(var temp=[],optionsCount=(options=options.split(",")).length,j=0;j<optionsCount;j++){var option=options[j].trim();if(0!==option.length){var spaceIndex=option.lastIndexOf(" ");if(-1===spaceIndex)var optionImage=option,optionWidth=999998;else optionImage=option.substr(0,spaceIndex),optionWidth=parseInt(option.substr(spaceIndex+1,option.length-spaceIndex-2),10);var add=!1;-1!==optionImage.indexOf(".webp",optionImage.length-5)?hasWebPSupport&&(add=!0):add=!0,add&&temp.push([optionImage,optionWidth])}}temp.sort(function(a,b){if(a[1]<b[1])return-1;if(a[1]>b[1])return 1;if(a[1]===b[1]){if(-1!==b[0].indexOf(".webp",b[0].length-5))return 1;if(-1!==a[0].indexOf(".webp",a[0].length-5))return-1}return 0}),options=temp}else options=[];else options=[];var containerWidth=container.offsetWidth*window.devicePixelRatio,bestSelectedOption=null;for(optionsCount=options.length,j=0;j<optionsCount;j++){var optionData=options[j];if(optionData[1]>=containerWidth){bestSelectedOption=optionData;break}}if(null===bestSelectedOption&&(bestSelectedOption=[element.getAttribute("src"),999999]),void 0===container.responsivelyLazyLastSetOption&&(container.responsivelyLazyLastSetOption=["",0]),container.responsivelyLazyLastSetOption[1]<bestSelectedOption[1]){container.responsivelyLazyLastSetOption=bestSelectedOption;var url=bestSelectedOption[0];void 0===container.responsivelyLazyEventsAttached&&(container.responsivelyLazyEventsAttached=!0,element.addEventListener("load",function(){var handler=container.getAttribute("data-onlazyload");null!==handler&&new Function(handler).bind(container)()},!1),element.addEventListener("error",function(){container.responsivelyLazyLastSetOption=["",0]},!1)),url===element.getAttribute("src")?element.removeAttribute("srcset"):element.setAttribute("srcset",url)}},updateWindowSize=function(){windowWidth=window.innerWidth,windowHeight=window.innerHeight},run=function(){var update=function(elements,unknownHeight){for(var elementsCount=elements.length,i=0;i<elementsCount;i++){var element=elements[i],container=unknownHeight?element:element.parentNode;isVisible(container)&&updateElement(container,element)}};update(document.querySelectorAll(".responsively-lazy > img"),!1),update(document.querySelectorAll("img.responsively-lazy"),!0)};if("srcset"in document.createElement("img")&&void 0!==window.devicePixelRatio&&void 0!==window.addEventListener&&void 0!==document.querySelectorAll){updateWindowSize();var image=new Image;image.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEADMDOJaQAA3AA/uuuAAA=",image.onload=image.onerror=function(){hasWebPSupport=2===image.width;var requestAnimationFrameFunction=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)},hasChange=!0,runIfHasChange=function(){hasChange&&(hasChange=!1,run()),requestAnimationFrameFunction.call(null,runIfHasChange)};if(runIfHasChange(),hasIntersectionObserverSupport)var updateIntersectionObservers=function(){for(var elements=document.querySelectorAll(".responsively-lazy"),elementsCount=elements.length,i=0;i<elementsCount;i++){var element=elements[i];void 0===element.responsivelyLazyObserverAttached&&(element.responsivelyLazyObserverAttached=!0,intersectionObserver.observe(element))}},intersectionObserver=new IntersectionObserver(function(entries){for(var i in entries){var entry=entries[i];if(entry.intersectionRatio>0){var target=entry.target;if("img"!==target.tagName.toLowerCase()){var img=target.querySelector("img");null!==img&&updateElement(target,img)}else updateElement(target,target)}}}),changeTimeout=null;var setChanged=function(){hasIntersectionObserverSupport?(window.clearTimeout(changeTimeout),changeTimeout=window.setTimeout(function(){hasChange=!0},300)):hasChange=!0},updateParentNodesScrollListeners=function(){for(var elements=document.querySelectorAll(".responsively-lazy"),elementsCount=elements.length,i=0;i<elementsCount;i++)for(var parentNode=elements[i].parentNode;parentNode&&"html"!==parentNode.tagName.toLowerCase();)void 0===parentNode.responsivelyLazyScrollAttached&&(parentNode.responsivelyLazyScrollAttached=!0,parentNode.addEventListener("scroll",setChanged)),parentNode=parentNode.parentNode},initialize=function(){(window.addEventListener("resize",function(){updateWindowSize(),setChanged()}),window.addEventListener("scroll",setChanged),window.addEventListener("load",setChanged),hasIntersectionObserverSupport&&updateIntersectionObservers(),updateParentNodesScrollListeners(),"undefined"!=typeof MutationObserver)&&new MutationObserver(function(){hasIntersectionObserverSupport&&updateIntersectionObservers(),updateParentNodesScrollListeners(),setChanged()}).observe(document.querySelector("body"),{childList:!0,subtree:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initialize):initialize()}}return{run:run,isVisible:isVisible}}();